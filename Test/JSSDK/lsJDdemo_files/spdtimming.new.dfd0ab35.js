function loadTtiPolyfill(){if(window.Promise){var o=("undefined"==typeof window||window!==this)&&"undefined"!=typeof global&&null!=global?global:this,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},n=0,f=0,w="img script iframe link audio video source".split(" ");c.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new Promise(function(e){t.s=e,"complete"==document.readyState?s(t):window.addEventListener("load",function(){s(t)})})},c.prototype.m=function(e){this.f.set(e,performance.now())},c.prototype.l=function(e){this.f.delete(e)},c.prototype.B=function(){v(this,performance.now()+5e3)},o.Object.defineProperties(c.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(m(this.f.values()))}}});var e={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new c(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define("ttiPolyfill",[],function(){return e}):window.ttiPolyfill=e}function i(){i=function(){},o.Symbol||(o.Symbol=r)}function r(e){return"jscomp_symbol_"+(e||"")+n++}function a(){i();var e=o.Symbol.iterator;e=e||(o.Symbol.iterator=o.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&t(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return d(this)}}),a=function(){}}function d(e){var t,n=0;return t=function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}},a(),(t={next:t})[o.Symbol.iterator]=function(){return this},t}function p(e){a();var t=e[Symbol.iterator];return t?t.call(e):d(e)}function m(e){if(!(e instanceof Array)){e=p(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function h(e,t){for(var n=(e=p(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||h(n.children,t))return 1}function g(e,t){if(2<e.length)return performance.now();for(var n=[],o=(t=p(t)).next();!o.done;o=t.next())o=o.value,n.push({timestamp:o.start,type:"requestStart"}),n.push({timestamp:o.end,type:"requestEnd"});for(o=(t=p(e)).next();!o.done;o=t.next())n.push({timestamp:o.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch(o=n[t],o.type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return o.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function c(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var i,r,a,d,c,s,u,o,n,t,l=window.__tti&&window.__tti.o;this.a=e?e.map(function(e){return{start:e.startTime,end:e.startTime+e.duration}}):[],l&&l.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,i=this.m.bind(this),r=this.l.bind(this),a=XMLHttpRequest.prototype.send,d=f++,XMLHttpRequest.prototype.send=function(e){for(var t=[],n=0;n<arguments.length;++n)t[+n]=arguments[n];var o=this;return i(d),this.addEventListener("readystatechange",function(){4===o.readyState&&r(d)}),a.apply(this,t)},c=this.m.bind(this),s=this.l.bind(this),u=fetch,fetch=function(e){for(var i=[],t=0;t<arguments.length;++t)i[+t]=arguments[t];return new Promise(function(t,n){var o=f++;c(o),u.apply(null,[].concat(m(i))).then(function(e){s(o),t(e)},function(e){s(e),n(e)})})},(o=this).c=new PerformanceObserver(function(e){for(var t=(e=p(e.getEntries())).next();!t.done;t=e.next())if("resource"===(t=t.value).entryType&&(o.b.push({start:t.fetchStart,end:t.responseEnd}),v(o,g(o.g,o.b)+5e3)),"longtask"===t.entryType){var n=t.startTime+t.duration;o.a.push({start:t.startTime,end:n}),v(o,n+5e3)}}),o.c.observe({entryTypes:["longtask","resource"]}),this.w&&(this.h=(n=this.B.bind(this),(t=new MutationObserver(function(e){for(var t=(e=p(e)).next();!t.done;t=e.next())("childList"==(t=t.value).type&&h(t.addedNodes,w)||"attributes"==t.type&&w.includes(t.target.tagName.toLowerCase()))&&n(t)})).observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t))}function s(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=g(e.g,e.b);v(e,Math.max(n+5e3,t))}function v(r,e){!r.i||r.v>e||(clearTimeout(r.j),r.j=setTimeout(function(){var e=performance.timing.navigationStart,t=g(r.g,r.b);e=(window.a&&window.a.A?1e3*window.a.A().C-e:0)||performance.timing.domContentLoadedEventEnd-e;if(r.u)var n=r.u;else n=performance.timing.domContentLoadedEventEnd?(n=performance.timing).domContentLoadedEventEnd-n.navigationStart:null;var o=performance.now();null===n&&v(r,Math.max(t+5e3,o+1e3));var i=r.a;(t=o-t<5e3?null:o-(t=i.length?i[i.length-1].end:e)<5e3?null:Math.max(t,n))&&(r.s(t),clearTimeout(r.j),r.i=!1,r.c&&r.c.disconnect(),r.h&&r.h.disconnect()),v(r,performance.now()+1e3)},e-performance.now()),r.v=e)}}!function(e){!window.__SPD_AUTO&&window.modulejs&&"function"==typeof define?define("spdtimming.new",e):e()}(function(e,t,n){var h=Math.random(),c=navigator.userAgent,g=window.__DBG_SPD_RPT_URL||(window.__DBG_SPD_PRE||"//fd.3.cn/cesu")+"/r?",v=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"],y=null,s=/(^|\s|;)+MicroMessenger\/([^;\s$]+)/g.exec(c),u=/(^|\s|;)+QQ\/([^;\s$]+)/g.exec(c),l=/(^|\s|;)+JZYC\/([^;\s$]+)/g.exec(c),i={android:[/(Android);?[\s\/]+([\d.]+)?/,[1,2]],ios:[/((iPad)|(iPod)|(iPhone)).*\s+OS\s+([\d_]+)/,function(e){return["ios",e[5]?e[5].replace(/_/g,"."):""]}],unknow:[/(Android);?[\s\/]+([\d.]+)?/],win:[/(\(|\s)*(Windows)[^\d.]+([\d\.]+).*((WOW64)*)/gi,[2,3]]},b={},_={},S=window.screen.width+","+window.screen.height+"\t"+(window.devicePixelRatio||0)+"\t",T=null,k=0,P=!1,E=function(e){var t,n;for(var o in i){if((n=i[o])[0]instanceof Function)return t=n[0](e),o+=t[1]?" "+t[1]:"";if(t=n[0].exec(e))return 1<n.length&&(n[1]instanceof Function?t=n[1](t):n[1]instanceof Array&&(t=[t[n[1][0]],t[n[1][1]]])),o+=t[1]?" "+t[1]:""}return"other"}(c);var f=!0,w=!1;function o(e,t){var n=e||window._PFM_TIMING;if(n&&!(n.length<1)&&(function(e){if(!w){var t=(new Date).getTime();if(window.athenaFdSetting&&window.athenaFdSetting.sampling&&0<window.athenaFdSetting.sampling.length)for(var n=0,o=window.athenaFdSetting.sampling.length;n<o;n++){var i=window.athenaFdSetting.sampling[n];if(i.start&&i.end){var r=new Date(i.start).getTime(),a=new Date(i.end).getTime();if(r<=t&&t<a&&(i.pid=i.pid||"",!i.pid||-1!=i.pid.split(",").indexOf(""+e))){var d="0"===i.rate?0:parseInt(i.rate||100)||100;f=Math.ceil(100*Math.random())<=d;break}}}w=!0}}(n[0][0]),f)){if("object"==typeof window.athenaFdSetting&&1!=window.athenaFdSetting.switch){for(var o=(window.athenaFdSetting.pidWhitelist||"").split(","),i=o.length,r=!1,a=n[0][0],d=0;d<i;d++)if(a==o[d]){r=!0;break}if(!r)return}!function(n){if(window.JD&&JD.device)JD.device.getNetwork(n);else{var e=/(\s|;)+NetType\/([^\s;\/]+)/g.exec(c);if(e&&e[2]){var t="unknow";switch(e[2]=e[2].toLowerCase(),e[2]){case"ctnet":case"cmnet":case"cunet":T=e[2].substr(0,2),t="3g";break;case"ctwap":case"cmwap":case"cuwap":T=e[2].substr(0,2),t="2g";break;default:T=null}n(t)}else try{s?document.addEventListener("WeixinJSBridgeReady",function(e){setTimeout(function(){WeixinJSBridge.invoke("getNetworkType",{},function(e){var t=e.err_msg||"unknow";-1!=t.indexOf(":")&&(t=t.split(":")[1]||"unknow"),"edge"==t?t="3g":"wwan"==t?t="4g":"fail"==t&&(t="unknow"),n(t)})},500)}):u?window.mqq&&mqq.device?mqq.invoke("device","getNetworkInfo",function(e){var t={"-1":"unknow",0:"unknow",1:"wifi",2:"2G",3:"3G",4:"4G"}[e.type]||"unknow";n(t)}):n("unknow"):l&&window.WQAPI&&WQAPI.network?n(String(WQAPI.network.type()).toLowerCase()):n("unknow")}catch(e){console.error("Error",e),n("unknow")}}}(function(e){try{!function(e,t){var n=(window.performance||window.webkitPerformance).timing,o=function(){var e=(window.performance||window.webkitPerformance||{}).timing;return e?e.navigationStart||e.fetchStart:null}(),i=!!window.__SPD_RPT_REPEAT;console.log("---RptData--",t);var r,a,d,c=0,s=0,u=0;if(t){if(!((d=t[0])&&d instanceof Array))return console.error("Invalide data for report",t);c=x(d[1]),u=d[0],d[2]}if(!c||!u)return console.error("Invalide data for report",t);r=c-o;var l={pid:u,os:E?E.replace(/%20/g,""):"other",apn:(e||"").toLowerCase(),wq_area:function(e,t,n,o,i){if(null==t){if(window.JD&&JD.cookie)return JD.cookie.get(e);var r,a=document.cookie;return(r=new RegExp("(^|;)\\s*"+e+"=([^;$]+)").exec(document.cookie))?r[2]:null}if(a=e+"="+encodeURIComponent(t),n&&(a+=";domain="+n),o&&(a+=";path="+o),i){var d=new Date;d.setTime((new Date).getTime()+1e3*i),a+=";expires="+d.toGMTString()}document.cookie=a}("wq_area"),_:h+=1};window._PFM_STATION&&(l.station=window._PFM_STATION);for(var f=1,w=t.length;f<w;f++)!i&&b[f]||!t[f]||0<(a=t[f]-c)&&(1<=f&&f<=100?(l["s"+f]=a,b[f]=1,s++):150<=f&&f<=200&&(l["p"+(f-100)]=a,b[f]=1,s++)),t[f]=null;if(1==window._PFM_PERFORMANCE){for(f=1,w=v.length;f<w;f++){var p=x(n[v[f]]);p=p?p-o:0,!_[f]&&0<p&&(_[f]=1,l["p"+f]=p,s++)}!_[20]&&0<r&&(_[20]=1,l.p20=Math.floor(r),s++)}var m=function(){var e=[];if(window.performance&&window.performance.getEntriesByType)try{for(var t=performance.getEntriesByType("paint"),n=0;n<t.length;n++){var o=t[n];"paint"===o.entryType&&("first-paint"===o.name&&(e[0]=parseInt(o.startTime,10)),"first-contentful-paint"===o.name&&(e[1]=parseInt(o.startTime,10)))}}catch(e){}return e}();_[21]||"number"!=typeof m[0]||(_[21]=1,l.p21=m[0],s++);_[22]||"number"!=typeof m[1]||(_[22]=1,l.p22=m[1],s++);_[23]||y&&(_[23]=1,l.p23=y,s++);0<s&&(P||(l.ext=S,P=!0),T&&(l.oper=T),function(e){var t=new Image;(window["_spd_img_cache"+k++]=t).idx=k,t.onload=t.onerror=t.onabort=function(e){var t=e.target;t.onload=t.onerror=t.onabort=null,delete window["_spd_img_cache"+t.idx]},t.src=e}(g+function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n+"="+encodeURIComponent(e[n]));return t.join("&")}(l)))}(e,n)}catch(e){console.error(e.stack||e)}})}}function x(e){return e?e instanceof Date?e.getTime():e:0}var r,a,d,p=(r=o,a=1e3,(d=function(){d.clear(),d.th=setTimeout(function(){r.apply(null,void 0),d.th=0},a)}).clear=function(){d.th&&(clearTimeout(d.th),d.th=0)},d),m={report:p};window.__SPD_RPT=m;var I=!1;function M(){var t;I||(I=!0,p(),t=function(e){"number"==typeof e&&(y=parseInt(e,10),p())},loadTtiPolyfill(),window.ttiPolyfill&&window.ttiPolyfill.getFirstConsistentlyInteractive({}).then(function(e){t(e)}),setTimeout(function(){p()},7e3),window.onunload=function(){try{p.clear(),o(window._PFM_TIMING)}catch(e){console.error(e)}})}if(window.__SPD_FOOT_PAGE_LOAD||window.athenaFdSetting?M():function e(t){e.counter||(e.counter=1);function n(e){if(l&&!f){if(f=!0,w&&(clearTimeout(w),w=null),l.onload=l.onreadystatechange=l.onerror=null,u&&l.parentNode&&u.removeChild(l),l=null,d){window[d]=null;try{delete window[d]}catch(e){}}"loaded"!=p&&"function"==typeof s&&s(e)}}var o=t.url,i=t.data||"",r=t.charset||"gb2312",a=t.timeout,d=t.callbackName||"",c=t.callback,s=t.errorback,u=document.head||document.getElementsByTagName("head")[0]||document.documentElement,l=document.createElement("script"),f=!1,w=null,p="uninitialized";if(i&&(o+=(-1!=o.indexOf("?")?"&":"?")+("string"==typeof i?i:function(e){var t=[];for(var n in e)t.push(n+"="+e[n]);return t.join("&")}(i))),d&&"function"==typeof c){var m=d;d=window[d]?d+e.counter++:d,window[d]=function(e){p="loaded",c.apply(null,arguments)},o=o.replace("="+m,"="+d)}p="loading",l.charset=r,l.id="spdscript_"+(new Date).getTime()+"_"+Math.ceil(1e5*Math.random()),l.onload=l.onreadystatechange=function(){var e=navigator.userAgent.toLowerCase();-1==e.indexOf("opera")&&-1!=e.indexOf("msie")&&!/loaded|complete/i.test(this.readyState)||n("loaded"==p?200:500)},l.onerror=function(){n(500)},a&&(w=setTimeout(function(){n(999)},parseInt(a,10))),setTimeout(function(){l.src=o;try{u.insertBefore(l,u.lastChild)}catch(e){}},0)}({url:"https://wq.360buyimg.com/data/ppms/js/ppms.pagev29640.jsonp",callbackName:"showPageData29640",callback:function(e){e&&e.data&&0<e.data.length&&(window.athenaFdSetting=e.data[0]),M()},errorback:function(){M()}}),"function"!=typeof e||!n)return m;n.exports=m});
