(function(e){if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=e}else if(typeof define==="function"&&(define.amd||define.cmd)){define(e)}else{if(!window.JD){window.JD={M:{}}}window.JD.M={smartbox:e()}}})(function(){var a=[],i=null;var u={type:"GET",success:w,error:w,complete:w,load:w,context:null,global:true,retryCount:0,globalLock:0,lockCallback:null,cgiKey:false,degrade:false,xhr:function(){return new window.XMLHttpRequest},dataType:"json",accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:false,needCookies:false,timeout:8,processData:true,cache:false,wqunit:/[?&]_wqunit_=1/.test(location.search),setReportUrl:""};var l=window;if(!l.callbackName){var e=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];for(var t=0;t<3;t++){for(var o=0;o<26;o++){e.push(e[t*26+o]+e[o])}}l.callbackName=e}l.ajaxCount=l.ajaxCount||0;var p="";var f=d("sceneval")||(/(\.|^)m\.jd\.com/.test(window.location.hostname)?2:0);function w(){}function d(e,t){var o=arguments[1]||window.location.search,s=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=o.substr(o.indexOf("?")+1).match(s);return r!=null?r[2]:""}function v(e){if(e.processData&&e.data&&typeof e.data!="string"){if(e.type.toLowerCase()=="post"&&e.jsonpCallback){return}e.data=s(e.data)}if(e.data&&(!e.type||e.type.toUpperCase()=="GET"))e.url=g(e.url,e.data),e.data=undefined}function s(e){var t=[];t.add=function(e,t){this.push(encodeURIComponent(e)+"="+encodeURIComponent(t))};r(t,e);return t.join("&").replace(/%20/g,"+")}function r(e,t){for(var o in t){e.add(o,t[o])}}function g(e,t){if(t=="")return e;return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function y(e){if(!e||typeof e!="string"){return e}e=e.replace(/^\s+|\s+$/g,"");if(!e)return e;return JSON.parse(e)}function k(o){var e=o.jsonpCallback,t=(typeof e=="function"?e():e)||"jsonpCBK"+l.callbackName[l.ajaxCount++%l.callbackName.length],s=document.createElement("script"),r,a={abort:n},i,n=function(e){c=1;console.log(o.url,"timeout");A(null,"timeout",a,o)},c=0;o.callbackName=t;s.charset=o.charset||"utf-8";s.onload=s.onerror=function(e,t){clearTimeout(i);if(c){console.log("timeout");return false}if(e.type=="error"){console.log(o.url,t||e.type||"error");A(null,"error",a,o)}else if(!r){A(null,e.type,a,o);window.onerror("","","","",{stack:"servererror:"+p})}else{if(r[0]&&r[0].retcode==-1&&r[0].message=="没有找到"&&r[0].unitReload==1){o.wqunit=false;o.url=o.urlbak;m(o)}else{b(r[0],a,o)}}r=undefined;s.parentNode.removeChild(s)};window[t]=function(){r=arguments};o.url=o.url.replace(/\?(.+)=\?/,"?$1="+t);s.src=o.url;document.head.appendChild(s);if(o.timeout>0)i=setTimeout(function(){n("timeout")},o.timeout*1e3);return a}function b(e,t,o){var s=o.context,r="success";o.success.call(s,e,o,r,t);c(r,t,o)}function A(e,t,o,s,r){if(s.retryCount<=0||s.type.toLowerCase()=="post"){n(e,t,o,s);return}if(["error","parsererror"].indexOf(t)>=0){n(e,t,o,s);return}setTimeout(function(){s.url=s.url.replace(/(&)?(_|g_tk|g_ty|callback)=\w+/g,"");console.log("start retry,"+s);s.retryCount--;m(s)},0)}function n(e,t,o,s){var r=s.context;console.log(s.url,t,e);if(s.degrade){console.log("降级",s.degrade);s.isDegrade=1;s.success.call(r,s.degrade,s)}var a={timeout:8e3,error:5e3,load:3020,abort:5001,parsererror:3021};s.error.call(r,t,a[t]||9e3,s,e,o);c(t,o,s)}function c(e,t,o){var s=o.context;o.complete.call(s,e,t)}function S(o){var e=o.jsonpCallback,t=(typeof e=="function"?e():e)||"jsonpCBK"+l.callbackName[l.ajaxCount++%l.callbackName.length],s,r,a={abort:i},i=function(e){console.log(o.url,"timeout");A(null,"timeout",a,o)};window[t]=function(){clearTimeout(s);r=arguments;var e=document.getElementById("ajaxPostForm");e&&e.remove();var t=document.getElementById("ajaxPostIframe");t&&t.remove();b(r[0],a,o)};o.data.callback=t;h(o,o.isFile);if(o.timeout>0)s=setTimeout(function(){window[t]=w;i("timeout")},o.timeout*1e3)}function h(e,t){var o=document.getElementById("ajaxPostForm");var s=document.getElementById("ajaxPostIframe");if(!o){o=document.createElement("form");o.id="ajaxPostForm";s=document.createElement("iframe");s.height=0;s.width=0;s.id=s.name="ajaxPostIframe";o.style.display="none";document.body.appendChild(s);document.body.appendChild(o)}var r=K("input",o);for(var a=0,i=r.length;a<i;++a){o.removeChild(r[a])}for(var n in e.data){var c=document.createElement("input");c.setAttribute("type","hidden");c.setAttribute("name",n);c.setAttribute("value",e.data[n]);o.appendChild(c)}o.target="ajaxPostIframe";o.action=e.url;o.method="POST";o.enctype=t?"multipart/form-data":"application/x-www-form-urlencoded";o.submit()}function m(e){if(!e)return false;var o=e;for(var t in u){typeof o[t]=="undefined"&&(o[t]=u[t])}o.url=o.url.replace(/^http:/,"");if(o.setReportUrl&&typeof o.setReportUrl=="function"){p=o.setReportUrl();!p&&(p=o.url)}else{p=window.CGI302ReportKeepUrl?o.url:o.url.replace(/\?.*/,"")}if(!o.crossDomain)o.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(o.url)&&RegExp.$2!=window.location.host;if(o.crossDomain&&o.needCookies)o.xhrFields={withCredentials:true};if(!o.url)o.url=window.location.toString();v(o);var s=o.dataType,r=/\?.+=\?/.test(o.url);if(r)s="jsonp";if(o.cache===false||(!e||e.cache!==true)&&("script"==s||"jsonp"==s))o.url=g(o.url,"_="+Date.now());if(f)o.url=g(o.url,"sceneval="+f);if("jsonp"==s||o.wqunit){if(!r){o.urlbak=o.url;o.url=g(o.url,o.jsonp?o.jsonp+"=?":o.jsonp===false?"":"callback=?")}return k(o)}if(o.type.toLowerCase()=="post"&&o.jsonpCallback){return S(o)}var a=o.accepts[s],i={},n=function(e,t){i[e.toLowerCase()]=[e,t]},c=/^([\w-]+:)\/\//.test(o.url)?RegExp.$1:window.location.protocol,l=o.xhr(),d=l.setRequestHeader,h;if(!o.crossDomain)n("X-Requested-With","XMLHttpRequest");n("Accept",a||"*/*");if(a=o.mimeType||a){if(a.indexOf(",")>-1)a=a.split(",",2)[0];l.overrideMimeType&&l.overrideMimeType(a)}if(o.contentType||o.contentType!==false&&o.data&&o.type.toUpperCase()!="GET")n("Content-Type",o.contentType||"application/x-www-form-urlencoded");if(o.headers)for(name in o.headers)n(name,o.headers[name]);l.setRequestHeader=n;l.onreadystatechange=function(){if(l.readyState==4){l.onreadystatechange=w;clearTimeout(h);var e,t=false;if(l.status>=200&&l.status<300||l.status==304||l.status==0&&c=="file:"){e=l.responseText;try{if(s=="script")(1,eval)(e);else if(s=="xml")e=l.responseXML;else if(s=="json")e=/^\s*$/.test(e)?null:y(e)}catch(e){t=e}if(t)A(t,"parsererror",l,o);else b(e,l,o)}else{console.log("ajax error",l);A(l.statusText||null,"load",l,o)}}};var m="async"in o?o.async:true;l.open(o.type,o.url,m,o.username,o.password);if(o.xhrFields)for(name in o.xhrFields)l[name]=o.xhrFields[name];for(name in i)d.apply(l,i[name]);if(o.timeout>0)h=setTimeout(function(){l.onreadystatechange=w;l.abort();A(null,"timeout",l,o)},o.timeout*1e3);l.send(o.data?o.data:null);return l}function C(e,t,o){if(!e||!t||!o){return}if(e instanceof Array){for(var s=0,r=e.length;s<r;s++){C(e[s],t,o)}return}if(t instanceof Array){for(var s=0,r=t.length;s<r;s++){C(e,t[s],o)}return}window.__allHandlers=window.__allHandlers||{};window.__Hcounter=window.__Hcounter||1;function a(e,t,o,s){e.__hids=e.__hids||[];var r="h"+window.__Hcounter++;e.__hids.push(r);window.__allHandlers[r]={type:t,handler:o,wrapper:s}}function i(e,t){return function(){return e.apply(t,arguments)}}if(window.addEventListener){var n=i(o,e);a(e,t,o,n);e.addEventListener(t,n,false)}else if(window.attachEvent){var n=i(o,e);a(e,t,o,n);e.attachEvent("on"+t,n)}else{e["on"+t]=o}}function x(){var e=arguments[0]||{},t=1,o=arguments.length,s;if(typeof e!="object"&&typeof e!="function")e={};for(;t<o;t++)if((s=arguments[t])!=null)for(var r in s){var a=s[r];if(e===a)continue;if(a!==undefined)e[r]=a}return e}function j(){var e=document.documentElement,t=document.body,o=e&&e.scrollLeft||t&&t.scrollLeft||window.pageXOffset||0,s=e&&e.scrollTop||t&&t.scrollTop||window.pageYOffset||0;return[o,s]}function T(e,t){B(e,t,"add")}function _(e,t){B(e,t,"remove")}function H(e,t){if(!e||!t)return null;var o=(typeof e=="object"?e.className:e).split(" ");for(var s=0,r=o.length;s<r;s++){if(t==o[s]){return t}}return null}function B(e,t,o){if(!e){return}var s=function(e,t,o){if(!e){return}var s=e.className,r=s?s.split(" "):[];if(o=="add"){if(!H(s,t)){r.push(t);e.className=r.join(" ")}}else if(o=="remove"){var a=[];for(var i=0,n=r.length;i<n;i++){if(t!=r[i]&&" "!=r[i]){a.push(r[i])}}e.className=a.join(" ")}};if(typeof e=="string"){var r=e.split(",");for(var a=0,i=r.length;a<i;a++){if(r[a]){s(M(r[a]),t,o)}}}else if(e instanceof Array){for(var a=0,i=e.length;a<i;a++){if(e[a]){s(e[a],t,o)}}}else{s(e,t,o)}}function M(e){return typeof e=="string"?document.getElementById(e):e}function U(e,t){if(!e){return}var o;if(!window["_loadCss"]||window["_loadCss"].indexOf(e)<0){o=document.createElement("link");o.setAttribute("type","text/css");o.setAttribute("rel","stylesheet");o.setAttribute("href",e);o.setAttribute("id","loadCss"+Math.random());document.getElementsByTagName("head")[0].appendChild(o);window["_loadCss"]?window["_loadCss"]+="|"+e:window["_loadCss"]="|"+e}o&&typeof t=="function"&&(o.onload=t);return true}function R(e,t){var o=t||"\\s";var s=new RegExp("(^"+o+"*)|("+o+"*$)","g");return e.replace(s,"")}function E(e){return typeof e!="string"?"":e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&apos;").replace(/ /g,"&nbsp;")}function L(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}function O(e,t){var o=window.localStorage.getItem(e);if(t){t(o)}else{return o}}function D(e){return window.localStorage.removeItem(e)}function I(e){var t=new RegExp("(^| )"+e+"(?:=([^;]*))?(;|$)"),o=document.cookie.match(t);if(!o||!o[2]){return""}var s=o[2];try{if(/(%[0-9A-F]{2}){2,}/.test(s)){return decodeURIComponent(s)}else{return unescape(s)}}catch(e){return unescape(s)}}function N(e,t,o,s,r,a){var i=new Date,o=arguments[2]||null,s=arguments[3]||"/",r=arguments[4]||null,a=arguments[5]||false;o?i.setMinutes(i.getMinutes()+parseInt(o)):"";document.cookie=e+"="+escape(t)+(o?";expires="+i.toGMTString():"")+(s?";path="+s:"")+(r?";domain="+r:"")+(a?";secure":"")}function G(e,t){if(/^\#/.test(e)){return M(e.replace(/^\#/,""))}return t?t.querySelector(e):document.querySelector(e)}function K(e,t){return t?t.querySelectorAll(e):document.querySelectorAll(e)}function F(e,t){if(e){if(t!="none"){var o=e.getAttribute("hide");if(o==1){t="none"}}e.style.display=t||"block"}}function P(e,t,o,s,r){var a=~e.indexOf("?")?"&":"?",i=e.indexOf(a+t+"=");if(i>=0){var n=new RegExp("(\\"+a+t+"=[^&#]*)");if(r){e=e.replace(n,a+t+"="+o)}else{e=e.replace(n,"$1"+(s?s:"")+o)}}else{var c=e.indexOf("#");if(c>-1){var l=e.split("#"),d=l[0],h=l[1];e=d+a+t+"="+o+"#"+h}else{e+=a+t+"="+o}}return e}function Q(e){var t;var o=0;if(o!==undefined&&Math.floor(Math.random()*10)>o)return false;var s="//wq.jd.com/webmonitor/collect/biz.json?contents=";if(e instanceof Array){t=[];for(var r=0;r<e.length;r++){t.push(e[r].bizid+"|"+e[r].operation+"|"+e[r].result+"|"+e[r].source+"|"+encodeURIComponent(String(e[r].message).replace(/,/g," "))+(window.traceid?"|"+traceid:""))}t=t.join(",")}else{t=e.bizid+"|"+e.operation+"|"+e.result+"|"+e.source+"|"+encodeURIComponent(String(e.message).replace(/,/g," "))+(window.traceid?"|"+traceid:"");if(e&&e.notCombo){(new Image).src=s+t+"&t="+Math.random();return false}}a.push(t);if(!i){i=setTimeout(function(){var e=new Image;e.src=s+a.join(",")+"&t="+Math.random();a=[];i=null},1e3)}}var J={set:L,get:O,remove:D};var W=/jdpingou/.test(navigator.userAgent.toLowerCase());var X="searchhistory_3";var V=false;var q={status:0,oldKey:"",curTheam:"searchland",hotwordsCache:null,isFucus:false,onShow:false,onShowHah:false,firstClickReport:false,inpageshow:false,dtimer:null,xstorageUrl:"//wq.360buyimg.com/js/common/dest/m.xstorage.client.min.js?t=201809121400",searchUrl:"//so.m.jd.com/ware/search.action?keyword={#keyword#}&searchFrom={#sf#}&sf={#ssf#}&as={#as#}",searchShopUrl:"//so.m.jd.com/shop/searchShop.action?keyword={#keyword#}&searchFrom={#sf#}&sf={#ssf#}&as={#as#}",tipsApi:"//wq.jd.com/bases/searchdropdown/getdropdown",hotKeyApi:"//wq.jd.com/bases/searchhotword/GetHotWords",drakApi:"//wq.jd.com/bases/searchpromptwords/searchpromptwords",doms:{},inputInfo:{needReplace:false,left:0,top:0,width:0,height:0},cgiMonitor:{smartboxTimer:null,timeout:5e3},opt:{deley:300,showCb:null,hideCb:null,keyInput:null,clickCb:null,css:"//wq.360buyimg.com/wxsq_item_search/search/static_css_include/style/search_m_smartbox.423d649d.css",sf:"search",smartboxBlock:"",inputDomid:"",onlyGenDoms:false,isLogin:false,initReplace:true,defaultSm:true,shortCutShow:false,cancelBtnShow:true,initHideSbtn:false,initKeyword:"",drakKey:"",drakText:"",drakLink:"",mManualReport:false,searchRd:"",hisRd:"",hotRd:"",darkRd:"",smartRd:"",smartShopRd:""}};q.init=function(e){if(this._status===1){console.warn("smartbox duplicate initialization, please check your code again.")}if(window.closeSearchEntrance_m){return}this.initParam(e);this.initTpl();if(!this.opt.onlyGenDoms){this.bindEvent()}this._status=1};q.initParam=function(e){e&&x(this.opt,e);var t=I("_mkjdcnsl");if(t){if(t.charAt(0)=="0"){this.opt.shortCutShow=false;this.opt.cancelBtnShow=false;this.opt.initHideSbtn=true}}if(W&&location.host!="m.jd.com"){this.opt.shortCutShow=false;this.opt.cancelBtnShow=false;this.opt.initHideSbtn=true}this.pageUrl=location.href.replace(/\?.*/,"");if(e.inputDomid){this.opt.inputDomid=G("#"+this.opt.inputDomid)}this.opt.css&&U(this.opt.css);this.curTheam=this.opt.sf=="home"?"home_normal":"searchland";this.loadXstorageClient()};function Y(){var e=I("sbx_hot_h");if(e===""){e=O("sbx_hot_h");N("sbx_hot_h",e,525600,"/","jd.com")}else{L("sbx_hot_h",e)}V=e==1;if(V){T(this.doms.msHotSearch,"hide_hotword")}else{_(this.doms.msHotSearch,"hide_hotword")}}q.loadXstorageClient=function(){m({url:this.xstorageUrl,data:{},type:"get",dataType:"script",cache:true,success:function(){var o=new CrossStorageClient;J={set:function(e,t){o.onConnect().then(function(){return o.set(e,t)}).catch(function(e){o.close()})},get:function(e,t){o.onConnect().then(function(){return o.get(e)}).then(function(e){t&&t(e)}).catch(function(e){o.close()})},remove:function(e){o.onConnect().then(function(){return o.del(e)}).catch(function(e){o.close()})}}}})};q.initTpl=function(){if(this.opt.smartboxBlock){this.opt.smartboxBlock=G("#"+this.opt.smartboxBlock)}else{var e=document.createElement("div");e.id="smartboxBlock";document.body.appendChild(e);this.opt.smartboxBlock=e}this.opt.smartboxBlock.className="search-land"+(this.opt.sf=="home"?" main-page":"");this.opt.smartboxBlock.style.display=this.opt.defaultSm?"block":"none";this.opt.smartboxBlock.innerHTML=this.child_indextpl();this.doms.kwObj=G("#msKeyWord");this.doms.searchBtn=G("#msSearchBtn");this.doms.clearBtn=G("#msSearchClearBtn");this.doms.cancelBtn=G("#msCancelBtn");this.doms.msContentWraper=G("#msContentWraper");this.doms.msHistory=G("#msHistory");this.doms.msHistoryTags=G("#msHistoryTags");this.doms.msHistoryDel=G("#msHistoryDel");this.doms.msClearToast=G("#msClearToast");this.doms.msClearFloor=G("#msClearFloor");this.doms.msClearCancel=G("#msClearCancel");this.doms.msClearSure=G("#msClearSure");this.doms.msHotSearch=G("#msHotSearch");this.doms.msHotSearchReflash=G("#msHotSearchReflash");this.doms.msHotwordVisible=G("#msHotwordVisible");this.doms.msHotSearchTags=G("#msHotSearchTags");this.doms.msKeys=G("#msKeys");this.doms.msShortcutLogin=G("#msShortcutLogin");this.doms.msShortcutMenu=G("#msShortcutMenu");this.doms.msShortcut=G("#msShortcut");this.doms.msHeaderMask=G("#msHeaderMask");this.doms.msSearchBox=G("#msSearchBox");this.opt.sf!="home"&&this.getShortCutMenus();this.oldKey=R(this.doms.kwObj.value);if(this.opt.drakText){this.doms.kwObj.setAttribute("placeholder",this.opt.drakText);!this.opt.initKeyword&&this.exposeDark()}else{this.loadDrakText()}this.opt.initReplace&&this.inputReplace();this.showShortCut(this.opt.shortCutShow);this.showCancelBtn(this.opt.cancelBtnShow)};q.inputReplace=function(){if(this.inputInfo.needReplace){}};q.showShortCut=function(e){if(e){this.showSearchBtn(false)}else{this.showSearchBtn(!this.opt.initHideSbtn);F(this.doms.msShortcut,"none")}};q.showMlogin=function(e){if(e){if(this.opt.sf=="home"&&!this.opt.isLogin){F(this.doms.msShortcutLogin,"")}else{F(this.doms.msShortcutMenu,"")}}else{F(this.doms.msShortcutLogin,"none");F(this.doms.msShortcutMenu,"none")}};q.showSearchBtn=function(e){if(e){F(this.doms.searchBtn,"");this.doms.msSearchBox.style.marginRight="52px"}else{F(this.doms.searchBtn,"none");this.doms.msSearchBox.style.marginRight="32px"}};q.showCancelBtn=function(e){if(e){F(this.doms.cancelBtn,"")}else{F(this.doms.cancelBtn,"none")}};q.bindEvent=function(){var l=this;C(this.doms.kwObj,"focus",function(){if(l.isFucus)return;l.isFucus=true;l.loadSuggest();var e="";if(!l.onShow){switch(l.opt.sf){case"home":e="MHome_BSearch";break;case"search":e="MProductList_Search";break;case"pinpai":e="MSearchBrand_Search";break;case"category":e="MFilter_Search";break}}var t=R(l.doms.kwObj.value);if(t==""){l.showHisAndHot()}else{l.hideHisAndHot();l.doms.clearBtn&&F(l.doms.clearBtn,"")}l.inputReplace(false);l.showCancelBtn(true);l.showSearchBtn(true);l.opt.showCb&&l.opt.showCb();if(e){l.firstClickReport=true;l.sendMping(e);window.setTimeout(function(){l.firstClickReport=false},300)}});C(this.doms.kwObj,"blur",function(){l.isFucus=false;window.setTimeout(function(){l.doms.clearBtn&&F(l.doms.clearBtn,"none")},0)});C(l.doms.kwObj,"click",function(){var e=R(l.doms.kwObj.value);l.clickEvent(1,0,e,l.firstClickReport);var t=false;if(!e&&l.opt.drakKey){e=l.opt.drakKey;t=true}var o={event_param:e+"_"+(t?"1":"0")+"_"+l.getOriginalSearch()};!l.firstClickReport&&l.sendMping("MSearch_Search",o)});var e=l.doms.kwObj.parentNode;while(e&&e!==document.body&&e.tagName.toUpperCase()!=="FORM"){e=e.parentNode}C(l.doms.kwObj,"keydown",function(e){if(e.keyCode=="13"){l.doms.kwObj.blur();var t=R(l.doms.kwObj.value),o=l.opt.searchRd,s=false;if(t==""){if(l.opt.drakLink){var r=decodeURIComponent(d("keyword",l.opt.drakLink)||"");var a=l.opt.drakLink;if(l.opt.darkRd){a=P(a,"ptag",l.opt.darkRd)}s=true;l.jumpToTarget(a,r,"MSearch_TrueLines",true);return}else if(l.opt.drakKey){t=R(l.opt.drakKey);o=l.opt.darkRd;var i={event_param:l.opt.drakText+"_"+t+"_2"};s=true;l.sendMping("MSearch_TrueLines",i)}else{return}}l.clickEvent(2,0,t);var n=l.genSearchUrl(t,o,11,1);if(n){var c={event_param:t+"_"+l.getOriginalSearch()+"_"+(s?"1":"0"),event_level:"2"};l.jumpToTarget(n,t,"MSearch_Searchthi",s,c)}}});if(l.doms.searchBtn){C(l.doms.searchBtn,"click",function(e){var t=R(l.doms.kwObj.value),o=l.opt.searchRd,s=false;if(t==""){if(l.opt.drakLink){var r=decodeURIComponent(d("keyword",l.drakInfo.link)||""),a=l.drakInfo.link;if(l.opt.darkRd){a=P(a,"ptag",l.opt.darkRd)}s=true;l.jumpToTarget(a,r,"MSearch_TrueLines",true);return}else if(l.opt.drakText&&l.opt.drakKey){t=l.opt.drakKey;o=l.opt.darkRd;s=true;var i={event_param:l.opt.drakText+"_"+t+"_2"};s=true;l.sendMping("MSearch_TrueLines",i)}}l.clickEvent(3,0,t);var n=l.genSearchUrl(t,o,11,1);if(n){l.jumpToTarget(n,t,"MSearch_SearchButton",s)}})}if(l.doms.cancelBtn){C(l.doms.cancelBtn,"click",function(e){if(l.onShow){l.doms.kwObj.blur();l.doms.kwObj.value=l.opt.initKeyword||"";l.hideWrap();l.opt.hideCb&&l.opt.hideCb();l.clickEvent(4,0,"");l.sendMping("MSearch_Back")}else{if(l.opt.sf=="home"){l.sendMping("MSearchFrame_Category",{event_level:"1",event_param:location.host});window.setTimeout(function(){location.href="//so.m.jd.com/category/all.html?searchFrom=bysearchbox"},200)}else{l.sendMping("MCommonHead_Back");history.back()}}})}if(l.doms.clearBtn){C(l.doms.clearBtn,"click",function(e){l.doms.kwObj.value="";l.doms.kwObj.focus();l.opt.keyInput&&l.opt.keyInput("");e.preventDefault();l.showHisAndHot();F(l.doms.clearBtn,"none");l.clickEvent(5,0,"");l.sendMping("MSearch_Clear",{event_param:""});l.opt.drakText&&l.exposeDark()})}if(l.doms.msHistoryDel){C(l.doms.msHistoryDel,"click",function(e){F(l.doms.msClearToast,"-webkit-box");l.clickEvent(7,0,"");l.sendMping("MSearch_ClearHistory")});C(l.doms.msClearFloor,"click",function(e){F(l.doms.msClearToast,"none");l.clickEvent(8,0,"")});C(l.doms.msClearCancel,"click",function(e){F(l.doms.msClearToast,"none");l.clickEvent(9,0,"");l.sendMping("MSearch_ClearHistoryCancel")});C(l.doms.msClearSure,"click",function(e){l.clearHistoryKeywords();F(l.doms.msClearToast,"none");l.clickEvent(10,0,"");l.sendMping("MSearch_ClearHistoryConfirm")})}C(l.doms.msShortcutLogin,"click",function(){l.sendMping("MSearchFrame_Login",{event_param:location.host});window.setTimeout(function(){location.href="//home.m.jd.com/myJd/home.action"},200)});C(l.doms.msShortcutMenu,"click",function(e){if(l.opt.sf=="home"){l.sendMping("MSearchFrame_PersonalCenter",{event_param:location.host});window.setTimeout(function(){location.href="//home.m.jd.com/myJd/home.action"},200)}else{l.sendMping("MCommonHead_NavigateButton");var t=l.doms.msShortcutMenu.getAttribute("show");if(t=="1"){F(l.doms.msShortcut,"none");F(l.doms.msHeaderMask,"none");l.doms.msShortcutMenu.setAttribute("show","0")}else{F(l.doms.msShortcut,"");F(l.doms.msHeaderMask,"");l.doms.msShortcutMenu.setAttribute("show","1")}}});C(l.doms.msHeaderMask,"click",function(e){F(l.doms.msHeaderMask,"none");F(l.doms.msShortcut,"none");l.doms.msShortcutMenu.setAttribute("show","0")});C(l.doms.msHotwordVisible,"click",function(e){if(H(l.doms.msHotSearch,"hide_hotword")){V=false;N("sbx_hot_h",0,525600,"/","jd.com");L("sbx_hot_h",0);_(l.doms.msHotSearch,"hide_hotword");window.wa&&window.wa("jdClick",{ptag:"7092.8.37"})}else{V=true;N("sbx_hot_h",1,525600,"/","jd.com");L("sbx_hot_h",1);T(l.doms.msHotSearch,"hide_hotword");window.wa&&window.wa("jdClick",{ptag:"7092.8.36"})}});l.setSuggestCheck();l.bindHisEvent();l.bindSmkeyEvent();C(window,"scroll",function(){if(document.activeElement&&document.activeElement===l.doms.kwObj&&j()[1]>0){l.doms.kwObj.blur()}});C(window,"pageshow",function(){if(l.inpageshow){l.doms.kwObj.blur();l.doms.kwObj.value=l.opt.initKeyword||"";l.hideWrap();l.opt.hideCb&&l.opt.hideCb()}l.inpageshow=true})};q.setSuggestCheck=function(){var t=q;if(t.isFucus){var e=R(t.doms.kwObj.value);if(e!=t.oldKey){t.oldKey=e;t.loadSuggest();t.opt.keyInput&&t.opt.keyInput(e)}if(e!=""){F(t.doms.clearBtn,"");if(t.onShowHah){t.hideHisAndHot()}}else{F(t.doms.clearBtn,"none");if(!t.onShowHah){t.showHisAndHot()}}}C(t.doms.kwObj,"input",o);C(t.doms.kwObj,"propertychange",o);function o(){t.dtimer&&window.clearTimeout(t.dtimer);t.dtimer=window.setTimeout(function(){var e=R(t.doms.kwObj.value);if(e!=t.oldKey){t.oldKey=e;t.loadSuggest();t.opt.keyInput&&t.opt.keyInput(e)}if(e!=""){F(t.doms.clearBtn,"");if(t.onShowHah){t.hideHisAndHot()}}else{F(t.doms.clearBtn,"none");if(!t.onShowHah){t.showHisAndHot()}t.opt.drakText&&t.exposeDark()}},t.opt.deley)}};q.loadSuggest=function(){var u=this;var p=R(u.doms.kwObj.value);if(!p||!u.isFucus){return}u.cgiMonitor.smartboxTimer=window.setTimeout(function(){try{Q({bizid:"36",operation:"16",result:"0",source:"0",message:"m_smartbox api timeout:"+u.opt.sf})}catch(e){}},u.cgiMonitor.timeout);m({url:u.tipsApi,data:{terminal:"m",zip:1,key:p,newjson:1},type:"get",dataType:"jsonp",success:function(e){if(u.onShowHah)return;var t=[],o=0,s=0,r=[],a=[],i=new RegExp("("+p.replace(/([\+\*\.\?\|\^\(\)\{\}\[\]\/\\])/g,"\\$1")+")","g");if(e&&e.length>0){for(var n=0,c=e.length;n<c;++n){var l=e[n];if(l.version){u.version=l.version}else if(l.wqif){r=l.wqif}else{a.push(l)}}r.sort(function(e,t){return e.showorder-t.showorder});for(var n=0,c=r.length;n<c&&s<2;++n){var d=r[n];if(d.iftp==0){t.push(u.child_shoptpl({keyword:d.shq,ind:++o}))}if(d.iftp==2){d.ind=++o;t.push(u.child_acqtpl(d))}s++}for(var n=0,c=a.length;n<c;++n){var h=a[n];if(!h.key)continue;h.pos=n;if(h.bra){}else{h.keywordStr=h.key&&h.key.replace(i,'<span class="search_string">$1</span>');h.ind=++o;t.push(u.child_seltpl(h))}}}if(t.length>0){u.doms.msKeys.innerHTML=t.join("");u.showWrap(2)}var m={bizid:"36",operation:"15",result:"0",source:"0",message:"m_smartbox api loaded:"+u.opt.sf};if(t.length==0){m={bizid:"36",operation:"17",result:"0",source:"0",message:"m_smartbox api empty:"+u.opt.sf}}try{Q(m)}catch(e){}},error:function(){try{Q({bizid:"36",operation:"15",result:"1",source:"0",message:"m_smartbox api failed:"+u.opt.sf})}catch(e){}},complete:function(){u.cgiMonitor.smartboxTimer&&window.clearTimeout(u.cgiMonitor.smartboxTimer)},load:function(){u.cgiMonitor.smartboxTimer&&window.clearTimeout(u.cgiMonitor.smartboxTimer)}})};q.genSearchUrl=function(e,t,o,s,r,a){var i=this.searchUrl.replace("{#keyword#}",encodeURIComponent(e)).replace("{#sf#}",this.opt.sf).replace("{#ssf#}",o).replace("{#as#}",s);if(t){i+="&PTAG="+t}if(r==2){i=P(i,"filt_type","ico,L"+a+"M"+a+";")}return i};q.genSearchShopUrl=function(e,t,o){var s=this.searchShopUrl.replace("{#keyword#}",encodeURIComponent(e)).replace("{#sf#}",this.opt.sf).replace("{#ssf#}",16).replace("{#as#}",o);if(t){s+="&PTAG="+t}return s};q.bindSmkeyEvent=function(){var v=this;C(v.doms.msKeys,"click",function(e){var t=e.target,o=t.getAttribute("key");while(!o&&t.tagName.toLowerCase!="li"){t=t.parentNode;o=t.getAttribute("key")}if(o){var s=t.getAttribute("ind"),r=t.getAttribute("mtype"),a=r=="shop",i=t.getAttribute("subind"),n=R(v.doms.kwObj.value),c=a?v.genSearchShopUrl(o,v.opt.smartShopRd,1):v.genSearchUrl(o,v.opt.smartRd,12,1),l=o;o=a?o+'"店铺"':o;var d=null;var h=null,m=v.getOriginalSearch();if(r=="key"){v.clickEvent(12,s,o);d="MSearch_SearchDropDownAssociationalWords";h={event_param:o+"_0"+"_"+n+"_"+s+"_"+m,event_level:"2"}}else if(r=="subkey"){v.clickEvent(13,s,o,i);d="MSearch_AssociationLabel";var u=t.getAttribute("assword"),p=t.innerHTML;h={event_param:i+"_"+n+"_"+u+"_"+s+"_"+p+"_"+m,event_level:"2"}}else if(a){v.clickEvent(14,s,o);d="MSearch_Shopsearch";h={event_param:l+"_"+m}}else if(r=="act"){var f=t.getAttribute("ico"),w=t.getAttribute("dec");c=v.genSearchUrl(o,v.opt.smartRd,19,0,2,f,w);o=o+'"活动"';d="MSearch_AssociateActivity";h={event_param:l+"_"+m}}v.jumpToTarget(c,o,d,false,h)}})};q.bindHisEvent=function(){var i=this;C(i.doms.msHistoryTags,"click",function(e){var t=e.target;if(t.tagName.toLowerCase()=="a"){t=t.parentNode}var o=decodeURIComponent(t.getAttribute("tourl")||""),s=t.getAttribute("ind");if(o){var r=decodeURIComponent(d("keyword",o)||"");if(/^(https?:)?\/\/so\.m\.jd\.com\/shop\//.test(o)){r+='"店铺"'}i.clickEvent(6,s,r);if(i.opt.hisRd){o=P(o,"ptag",i.opt.hisRd)}o=P(o,"sf",14);o=P(o,"as",0);var a={event_param:r+"_"+s+"_"+i.getOriginalSearch(),event_level:"2"};i.jumpToTarget(o,r,"MSearch_HistoryRecords",false,a)}});C(i.doms.msHotSearchTags,"click",function(e){var t=e.target;if(t.tagName.toLowerCase()=="a"){t=t.parentNode}else if(t.tagName.toLowerCase()=="i"){t=t.parentNode.parentNode}var o=t.getAttribute("key");if(!o)return;var s=t.getAttribute("ind"),r=i.genSearchUrl(o,i.opt.hotRd,15,0);i.clickEvent(11,s,o);var a={event_param:o+"_"+s+"_"+i.getOriginalSearch(),event_level:"2"};i.jumpToTarget(r,o,"MSearch_HotWords",false,a)})};q.getOriginalSearch=function(){var e="3";switch(this.opt.sf){case"home":e="1";break;case"category":e="2";break}return e};q.showHisAndHot=function(){var e=this;e.onShowHah=true;e.showWrap(1);e.initHistory();e.initHotList();if(!q.hasShow){q.hasShow&&window.wa&&window.wa("ptagExposure",{ptag:V?"37024.26.3":"37024.26.2"});q.hasShow=true}Y.call(e)};q.hideHisAndHot=function(){var e=this;e.onShowHah=false;e.showWrap(2)};q.initHistory=function(){var a=this;a.getHistoryKeywords(function(e){var t=[],o=e.length;for(var s=0;s<o;++s){var r=e[s];r.ind=s+1;t.push(a.child_histpl(r))}if(t.length>0){a.doms.msHistoryTags.innerHTML=t.join("");a.doms.msHistory.setAttribute("hide","0");F(a.doms.msHistory,a.onShowHah?"":"none")}else{a.doms.msHistory.setAttribute("hide","1");F(a.doms.msHistory,"none")}})};q.initHotList=function(){var t=this;if(t.hotwordsCache){t.fillHotList();return}m({url:t.hotKeyApi,data:{},type:"get",dataType:"jsonp",success:function(e){if(e.retcode!=0){return}t.hotwordsCache=e;t.fillHotList()}})};q.fillHotList=function(){var e=this,t=[],o=12,s=0;t.push(e.child_hideHottpl());if(e.hotwordsCache.owner&&e.hotwordsCache.owner.length>0){for(var r=e.hotwordsCache.owner.length;s<r&&s<o;++s){var a=e.hotwordsCache.owner[s];t.push(e.child_hottpl({hotWord:a,ind:s+1}))}}if(s<o&&e.hotwordsCache.def&&e.hotwordsCache.def.length>0){for(var r=e.hotwordsCache.def.length;s<r&&s<o;++s){var a=e.hotwordsCache.def[s];t.push(e.child_hottpl({hotWord:a,ind:s+1}))}}if(t.length>1){e.doms.msHotSearchTags.innerHTML=t.join("");F(e.doms.msHotSearch,"")}};q.loadDrakText=function(){var s=this;m({url:s.drakApi,data:{},type:"get",dataType:"jsonp",success:function(e){if(e.retcode!=0){return}var t=e.searchwords;if(t&&t.length>0){var o=t[0];s.opt.drakText=o.showword;s.opt.drakKey=o.searchword;s.doms.kwObj.setAttribute("placeholder",s.opt.drakText);!s.opt.initKeyword&&s.exposeDark()}}})};q.showWrap=function(e){this.onShow=true;if(this.opt.defaultSm){F(this.doms.msContentWraper,"")}else{F(this.opt.smartboxBlock,"")}if(this.opt.shortCutShow){this.showShortCut(false)}this.showMlogin(false);if(e==1){F(this.doms.msKeys,"none");F(this.doms.msClearToast,"none");F(this.doms.msHistory,"");this.hotwordsCache&&F(this.doms.msHotSearch,"")}else{F(this.doms.msKeys,"");F(this.doms.msClearToast,"none");F(this.doms.msHistory,"none");F(this.doms.msHotSearch,"none")}if(this.opt.sf=="home"){this.changeTheam("")}};q.hideWrap=function(){this.onShow=false;if(this.opt.defaultSm){F(this.doms.msContentWraper,"none")}else{F(this.opt.smartboxBlock,"none")}if(this.opt.shortCutShow){this.showShortCut(true);this.showSearchBtn(false)}else{this.showSearchBtn(!this.opt.initHideSbtn)}this.showMlogin(true);this.showCancelBtn(this.opt.cancelBtnShow);if(this.opt.sf=="home"){this.changeTheam(this.curTheam)}};q.saveHistoryKeywords=function(a,i){var e=this;e.getHistoryKeywords(function(e){var t=-1;for(var o=0,s=e.length;o<s;++o){var r=e[o];if(r.text==i){t=o;break}}if(t>-1){e.splice(t,1)}e.unshift({text:i,href:a});if(e.length>=18){e=e.slice(0,18)}J.set(X,JSON.stringify(e))})};q.getHistoryKeywords=function(o){J.get(X,function(e){var t=[];if(e){try{t=JSON.parse(e)}catch(e){t=[]}}o&&o(t)})};q.clearHistoryKeywords=function(){J.remove(X);this.initHistory()};q.jumpToTarget=function(e,t,o,s,r){t&&this.saveHistoryKeywords(e,t);this.initHistory();var a=s?1:0,i=this.getOriginalSearch();var n={event_param:t+"_"+a+"_"+i,event_level:"2"};if(r){n=r}this.sendMping(o,n);if(z()&&/\/\/so?\.m\.jd\.com\/ware\/search\.action/.test(e)){e=e.replace(/.*[?&]keyword=([^&#]+).*[?&]searchFrom=([^&#]*)/,function(e,t,o){return"//wqs.jd.com/search/index.shtml?key="+t+"&sf="+(o||"")});e=P(e,"sceneval","2")}window.setTimeout(function(){location.href=e},200)};q.exposeDark=function(){var e=this.getOriginalSearch();if(!window.MPing){var t=this;window.setTimeout(function(){t.sendMping("MSearch_DarkLines",{event_param:e+"_2"})},200)}else{this.sendMping("MSearch_DarkLines",{event_param:e+"_2"})}};q.clickEvent=function(e,t,o,s){if(this.opt.clickCb){try{this.opt.clickCb(e,t,o,s)}catch(e){console.log(JSON.stringify(e))}}};q.sendMping=function(e,t){if(e&&!this.opt.mManualReport){try{var o=new MPing.inputs.Click(e);if(t){o=x(o,t)}var s=new MPing;s.send(o)}catch(e){}}},q.getShortCutMenus=function(){var t=this;m({url:"//mapi.m.jd.com/commonHeader/headerInfo.action?_format_=json&isNewVersion=1",data:{},method:"POST",async:true,timeout:3e3,cache:true,success:function(e){t.setShortCutMenus(e)},error:function(){t.setShortCutMenus()}})};q.setShortCutMenus=function(e){var t=e||{};if(!t.navList||t.navList.length==0){t.navList=[{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAAEhlFeZAAAABGdBTUEAALGPC/xhBQAAAptJREFUSA3Nls+rTVEUx++575UfPeRHEUkUZaIkZaKeTIyMlFIGMiADRSlDMzMDZWZm8vwDBlKiGFBSlIS8F1FGUsLrecfnu+217z777HPuub2rrPq+tdb3+93r/Nznvl4vF2VZLuT4HkJZmKLG6nzG8NIpqbUvNiXDDAnEx0BYAfndastwD6wOI7VcIcHypHfNeeJQJM55bZAwnR10UYVwTi35UUQ74mpMYHjleopbsWA1/Cer/0VmvsI9SWU1rcdBPykTcbfVGIuYL4PFhHsH9yzmKjXiDfCrQiYN+lPwPtA0F8HXQHQo8N8Bb4OVpnITaN0LoRxMFKnPaSlpvWUbEPfuVTfBMga9jnbTFn1v8vDMgimwd7gzcbDIvQjkFYnU3GLWKV4Cu4BidbPbK3995Rkz0m/z3HrjatkbTqQC/Cavba5okIUXjlaEqEFf5z3bHU0z4YnDkS9b4tOdVux2bwXFgawzQ+JdrpVOCkXGmFLmbXp7pjH89phOF4fephjhF+jaJ1Ubr2xe+0zGmup+URRuAcbsWWXJdEqut4WddoFOnSFu59ip6hn+RJjw0+ONbF97STr9oc/bz6gnDjADFD/AsrpjjAwHOA30iBXXwWdXleV98tQYD+Ue/QU/XOl8PJx+B5iVQDwBa2N95JoBVzSJ0NWdahuAvgW8BooXYGObv6ax4JpWEvPgWM3QQuDfAJ4DxRuwtdGO2Ac3gUIvyJFGcweB9WvAY6D4AHaGZTTavreB4hs4GMQxFMxbCe4BxRewR5t0P9CPxj6wCjwE4wz9b6f9qa01A46DQbhz4c+AWXqVm2mfo07TGWBbw2ZZnu00IGeyCTlNXE7PcfH6nD7SlcbDllL/Fwd1vxB2S9Lsry7+FRE18po/MiDmblSeG8kAAAAASUVORK5CYII=",isDisplay:true,jumpUrl:"https://m.jd.com",name:"首页",key:"index"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAFMN540AAAABGdBTUEAALGPC/xhBQAAApRJREFUSA3Vlr9KXEEUxncFhYCNYBEsTJEi4GNsIdhFxDdIt42PEXyO2CVVCms7DVZiCItik5DSQptYhJvfd2eO82dn7t69IUUOnJ3z5/vOPXNn7syORl6appmZPcqdxjIknm2LhZHkSfBiSzzkKY6ltgO46tgTy86xCBQfMjZGPkLYIPZ7jFFtfowkRLCH6CO62iYwWraNhsbfN1svbufZwRB4JQrsRnZrrgjhg1sGZpzONRQzI1IcDnbnXAMssvRslUWu0R10HT1CJccRNDVJ6kVdp9HgkYsnGRKySOoNr6fR1CNvb2gusVpNuuJT8rcpK/MA7KtIJt+8v5XB+7sUeKUi/RnLICmsuZ+geoEz9LAXH+AxKtHaao211lpzSdiszne/qoylF1X8hIlPhKx2oCQSqmdIcuqgPAUxM3ziktYUwvEVZ3uQ9Q4exKm2FxfM7Hf4n7OYc6l6i06LSYLqDFlr8852v0bwsaQAMX1NT+h7w1VHQOoglwsCd1XSogTkK/RSuPTIXMT0ecjfMU97wv8BbPnTkSY6D+SuJpmvPpzSShBORJhwmeRFE2jkFHD2iWuf6Ays7mzlPEZYSf2ozx9kPiQdRjbDZMMapmuEqyYlquHu2y6C5QDrBJQcWWzZUdy2QuV/RbEeBB27ks67q0j2QXHbCtQyXHWdDMD409vbUWxZ07g/ehPpVNe8RCd1n0aT2uJ4LkNzkCQXORDsktYunSzCW15Y1Hb2W4u3I4miJCAcQOrcPilx9Aa0aXTtaA3tFlXMblLM5hf6Oq83yKeQPjEtgXb8DNUGvEe/oB/QPVQnm5o5RyVf0c1BDxxK4oEv0RtUcoa+GHRN/EUDb+B+RD8NrfH/8gZdbUOnG1+JfwA4qCAoSiTNEwAAAABJRU5ErkJggg==",isDisplay:true,jumpUrl:"https://so.m.jd.com/category/all.html",name:"分类搜索",key:"search"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAXCAYAAAFrOM/8AAAABGdBTUEAALGPC/xhBQAAAfFJREFUSA21lb1LA0EQxXPGIrWktLC0ELEQwcLGQggWlmJpIeKfYGFhbSMIdlZiY20hiIVYWImtIATB3u/GD3L+Zm9vs3s37gUTByY7896bt5vlcqmlRC0WiZCBKmiKo5APBhOVhBNQr7vGK4qibY8zJYKVAMsnWLO9hM3BQOk3CI78Pqi1abAxI6LYCdQ0YMfmaoTQpt0ApDtlSQjQJidzFxFURNt3TkTsgIpCtO7MdscP1maSJG+xWebW4GcDDWCTfA9ApUHzJFqF6hPCtUW62xU7DQsuie8a3EHVGZwY5zQflrpqEH5rWBPlJhonGN77LK+OB3gkRx0QKdDdkeNOQrNJ7jkgUqALvxZ9g/yOzDiqNCyMCrqRbpHrhrpQVkGol1jUSV8UHoB9YaBp4xhD9bgiY6Ong5QoPp4lTN1IBsmWT2pY8Gz7Yuo6T1qngP1fy+kOSYkNf5cMGtjnru9taqwnrP19iewTwPfUei+qVpAnVrCsCv4A4lcnP8kO2VAtIOZIiRtV8AcQr3njmKYXMl76NQrIQ3XJckVOIV4QbACR+5xFvdhwyZ7wPCrskcTr2vrNVI4gvLXi6UpxRIDHiPV5ici6FOJV8tkODWTpuvdYsav5t2UtvZl8i151/ky0thuymAjep/4grBwsj191PxQBfCUS+pFvAAAAAElFTkSuQmCC",isDisplay:true,jumpUrl:"https://p.m.jd.com/cart/cart.action",name:"购物车",key:"cart"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAEFCu8CAAAABGdBTUEAALGPC/xhBQAAArNJREFUSA2tlr1KXUEUhe8VUSFCUhgkoI2VmCqmEEtNmuQR0gg2eYOUPoAEbKwkTxES8gNiE5NgF4JdrCIBwUKwComefGvO7Lkzc37uj9mwmL3XXnvPuXNm5txOx1tRFDvmdwhmQiAH4gKsOhKnSLJecZyQUo2BuwlbCVBcG4l/JX/MCMZu5CcPOBslnEv1j8AR3AeXgTBHichfN9+NJC8SIg8QLItjPLece1oIrcljT34m/OB8nzBxGOG3QpA7tUWQ++AarIBpsAdkE3mDEJM8BiuBiBxVRmGy7OLfgeexYGCfxovqjr1RUekWZ7UNSM57wUKtwJNovoJy3XE2wGFbQZ5DX3TBTxJzeXKkmGY74BJolcPGipvFm1kLMQG07LfAPbAJvkPtMzYbgiuwnivgtCFqZ3ZakslLtgbQ2kXpmbWkxpbCGXLJOUl+Y9wk87eJX2VcL6TrSxAOljLEy6D2J/QqS+GZCRnfyscWE1EckPzoJEXxmrG82spGL4h13cnS6wviHHyJG+U++QUgm3c5nC3Qu5zyiihGNwvK3xucSNDmoj8EG43vrk+xOx39l7ra5bRKZQyPpY2/C7SPm0w5aZovtKxvbeibaJJfoHJorIjcI69hKHaNH2qkUHeAbG/QQmldRfzRHaJYF45seogafS9k1U+ib9J2iE+85sGgE6IzrdUOXspTLgFthj/gYb9KabxWNUv99LV5CifBeyD7CypXlTifY3DaydpmbSSF+l/0DBwAXd+xuQ+m6iHtFrO8tAdAtW2vq5we0So4BbLfYBvcbnu4OCetr1GtTL3CTRm0kOPgE5B9A3dCckRHPXwvBtd73LUimAK6hmVPRuzfWKaernM5x5Tew5En1hqrbpig/5qf40h/Udwl3MVu2Le13ObRTnoKbKP4B/n/g+bQXP8A8Y9H3Xp0rSoAAAAASUVORK5CYII=",isDisplay:true,jumpUrl:"https://home.m.jd.com",name:"我的京东",key:"home"},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhCAYAAAHPIZnHAAAABGdBTUEAALGPC/xhBQAABFFJREFUWAmdll2IVlUUhmcsHSVRUTMl1C4MHU2S/kSKbhpFzAshCsR0oEQRUedGpYukTNKwuskiBalIwX7QTEsUSXFqvBTUm6GLTPybdNT8yfzJ4/Pu1t6zz/7OGef7Frzfetda715nn33O2furqzPLsmyyaC/I9yCD37JalyM/oJcPTTXSx3Uk+sVBSwhigmp8HN+HI292EsgY0AJuA2/fGmnK9SH5jk/AL3gePMnjYHhIFBEE85XH36mok7ySJrV6sj1W6IAvAvVBSLAhBBDiEYrxzkKN6KIP4L94HrzkIYAQ3oxjJfrGopjnhD5A0OF58CQ/U4B/NiRTQnF1mtOIh8DH4E1fhMtG6Ec53C1xbKrXOE/iJBjlk3AJeyvGTzL/ANzbR0ba5N04/DlLyrn3CH/Bcsfwnca3WMMniU+AV12D9EfiNOdjSqfBTB8XejXASkUqFg5Mk+iGFonjXPhS08EWj8bnvgwGXyL3XIk+n0b8sK6GrQY/O5ZlDXlVQYRQ30k7OFBQzqXcLSCcBz4Bg616Dr8WXCL3IVgKZJ250QpIXgW/gsVANhl8DW4qwKbpx7R/QJ8Gw8FY1wwSHgm0H7hh4kfgfY0fhHubC7kDroAvNYO4wVuEh11nfuADwUQfW7NPyf0AVoF2iWYCb5dN1GSJG/gjvogfYnU1aI0bB05hsA3o2pmokhtp+ceDuIgg2gPmldR0S+GWpSl6E0eTP17UoL6+/m/yuq3yl4niHKAN9sGiJuS1iGHjqRBxla0IdADoOPmN+IWk0VnirtMtKeZCGpwCL8dJ4u1gdpwr5QjXgdwmSpxbxNLBKkiMhQWD91ei20FxMRUT6xV+JtZ0yxGfB3oT3wZ3wfZ0QMVTiAU8AW0oWsSnwEDiq3G9am4zweXsOlGjbwZ/DOiLfQW4b8fXSj3Cl8CfILW/SLizA69d7hrQUrgL4t8Hso3gCfAf0DrvAoeBTMsYHmTFJChukwrbnBbJvecq9uXDBwG9h940ocUah59hSR2SrykPNCFNeBj4AGhy3vZCBmmgDjrZowUTaCCvnVUovwsbKA1YCfYBbVlzbXLfwGXLLJ7wf8h/Och48I8lNKv5oBl8B2Sa9Yt+cnDtSCtAO9Ddxab/GZ+DdBNuJKd3JbU3fF9NRMu7CGwCX4BlwP2hs1m/TuyX8BB8OugTGkCIxwJ9/TqnZGfAhFhTE6eJPxWP9LQBY/Q4fgQyTTh3QPS0j9MxWMste76qgYgZs8CNzLKfqh0b9DTYYU2WhGQVhLGtNj49GnrWhcHaA/ZbE7mzoAUUnYgVTdG9C2Qr0mKPGrCF3gVNwBlNFgKthr7z3WnTgniA5f4tqNWe4uLrdVvYmu66UNfBKhvXna7qGg2PurZZNqtsMHV9lrKvyjQ15Wm4xrXlT21ZA+prTdNWpqk5T+Pl1nwnPvcuEU8BOshk62q+yP0G0lwX+l1XSUw7oQ6y3MSK+t0DVG5rShBkLlAAAAAASUVORK5CYII=",isDisplay:true,jumpUrl:"https://wqs.jd.com/wxsq_project/mhistory/index.html",name:"浏览记录",key:"footprint"}]}var o=true;var s=I("mhome");var r=I("sphome");if(s=="1"){o=true}else if(r=="1"){o=false}var a=t.navList;var i=window.location.href;var n=i.split("?");var c=n[0];var l="";for(var d=0,h=a.length;d<h;d++){if(a[d].isDisplay&&a[d].icon&&a[d].jumpUrl&&a[d].name&&a[d].key){var m="";var u="";var p=a[d].report_eventid?true:false;var c=a[d].report_eventparam?a[d].report_eventparam:n[0];var f=a[d].jumpUrl;switch(a[d].key){case"index":m="m_index";p?u=a[d].report_eventid:u="MCommonHead_home";o?f=a[d].jumpUrl:f="//sp.m.jd.com";break;case"search":m="category_search";p?u=a[d].report_eventid:u="MCommonHead_CategorySearch";a[d].jumpUrl+="?searchFrom=header";break;case"cart":m="p_cart";p?u=a[d].report_eventid:u="MCommonHead_Cart";break;case"home":m="h_home";p?u=a[d].report_eventid:u="MCommonHead_MYJD";break;case"footprint":m="h_footprint";p?u=a[d].report_eventid:u="MCommonHead_FootPrint";break;case"myfocus":m="h_myfocus";p?u=a[d].report_eventid:u="";break;default:m="m_"+a[d].key;p?u=a[d].report_eventid:u=""}l+="<li>"+'<a class="J_ping" '+(!this.opt.mManualReport?'report-eventid="'+u+'" report-eventparam="'+c+'"':"")+' href="'+f+'">'+'<span class="shortcut-'+a[d].key+'" style="background: url('+a[d].icon+') no-repeat center center;background-size: 15px"></span>'+"<strong>"+a[d].name+"</strong>"+"</a>"+"</li>"}}this.doms.msShortcut&&(this.doms.msShortcut.innerHTML=l)};q.child_indextpl=function(){var e='<div id="msContentWraper" style="display:none;">'+'<div id="msHistory" class="recent-search" style="display:none;"><div class="recent-search-head cf"><p>最近搜索</p><i id="msHistoryDel" class="garbage-pic"></i></div><div id="msHistoryTags" class="recent-search-tags"></div></div>'+'<div id="msClearToast" class="search-toast" style="display:none;"><div id="msClearFloor" class="black-floor"></div><div class="ground-toast"><div class="toast-content"> 确定要清空吗? </div><div class="toast-btn"><a class="no" id="msClearCancel">取消</a><a class="sure" id="msClearSure">确定</a></div></div></div>'+'<div id="msHotSearch" class="hot-search'+(V?" hide_hotword":"")+'" style="display:none;"><div class="hot-search-head cf"><p>热门搜索</p><i id="msHotSearchReflash" class="around-pic" style="display:none;"></i><div id="msHotwordVisible" class="hotword_visible"><span>隐藏</span><span>显示</span></div></div><div id="msHotSearchTags" class="hot-search-tags"></div></div>'+'<ul id="msKeys" class="association-normal"></ul></div>';e+='<div id="msHeaderMask" class="header-mask" style="display:none;"></div>'+'<ul id="msShortcut" class="jd-header-vertical-shortcut-v2" style="position: absolute; top: 53px; right: 10px;display:none;">'+"</ul>";return this.child_searchtpl()+e};q.child_shoptpl=function(e){return'<li key="'+e.keyword+'" mtype="shop" ind="'+e.ind+'"><a href="javascript:void(0);"><i class="shop-pic"></i><span class="association-shop-name">"'+e.keyword+'"店铺</span></a></li>'};q.child_acqtpl=function(e){var t=e.acu.replace(/^\&icon=/,"");return'<li mtype="act" dec="'+e.acq+'" key="'+e.shq+'" ico="'+t+'"><a href="javascript:void(0);"><i class="act-pic"></i><span class="association-shop-name">在</span><span class="txt-tag"><img src="//img12.360buyimg.com/cms/'+e.acp+'"></span><span class="association-shop-name">下搜索 '+e.shq+"</span></a></li>"};q.child_seltpl=function(e){var t=['<li key="'+e.key+'" mtype="key" ind="'+e.ind+'"><a href="javascript:void(0);">'];t.push('<span class="association-product-name">'+e.keywordStr+"</span>");if(e.tag&&e.tag.length>0){for(var o=0,s=e.tag.length;o<s;++o){var r=e.tag[o];t.push('<span class="association-product-btn" key="'+r.tse+'" assword="'+e.key+'" mtype="subkey" ind="'+e.ind+'" subind="'+(o+1)+'">'+r.tsh+"</span>")}}t.push("</a></li>");return t.join("")};q.child_histpl=function(e){var t='<span tourl="'+encodeURIComponent(e.href)+'" ind="'+encodeURIComponent(e.ind)+'"><a href="javascript:void(0);">'+E(e.text)+"</a></span>";return t};q.child_hottpl=function(e){var t='<span key="'+e.hotWord+'" ind="'+e.ind+'"><a href="javascript:void(0);"><i class="hot-search-move '+(e.ind<=3?"hot-search-red":"")+'">'+e.hotWord+"</i></a></span>";return t};q.child_hideHottpl=function(e){return'<div class="s_hasHide">已隐藏搜索发现</div>'};q.child_searchtpl=function(){var e='<div class="mjd-header">'+'<div class="m_common_container">'+'<div class="m_cc_header_inner">'+'<header class="jd-header">'+'<div class="jd-header-new-bar">'+'<div id="msCancelBtn" class="jd-header-icon-back J_ping"><span></span></div>'+'<div class="jd-header-new-title"></div>'+'<div id="msShortcutLogin" class="jd-header-icon-new-shortcut-text J_ping" style="display:none;"><span>登录</span></div>'+'<div id="msShortcutMenu" class="jd-header-icon-new-shortcut J_ping" style="display:none;"><span></span></div>'+"</div>"+"</header>"+"</div>"+'<div class="m-common-header-search">'+'<form action="/search/search.action" class="jd-header-search-form">'+'<div class="jd-header-search-box" id="msSearchBox">'+'<i id="search-input-left-jd" class="jd-header-icon-jd"></i>'+'<i id="search-input-left-icon" class="jd-header-icon-fdj"></i>'+'<div class="jd-header-search-input">'+'<input value="'+E(this.opt.initKeyword)+'" maxlength="20" name="keyword" id="msKeyWord" type="text" cleardefault="no" autocomplete="off" placeholder="搜索商品/店铺" class="hilight2">'+'<input name="catelogyList" type="text" value="" style="display:none;">'+'<div class="head-input-icon J_ping" id="msSearchTab" report-eventid="MSearch_SearchTab" style="display:none;"></div>'+"</div>"+'<a href="javascript:void(0);" class="jd-header-icon-close" id="msSearchClearBtn" style="display:none;"></a>'+"</div>"+'<a href="javascript:void(0)" style="display:'+(this.opt.initHideSbtn?"none":"block")+';" id="msSearchBtn" class="jd-header-icon-search1">'+"<span>搜索</span>"+"</a>"+"</form>"+"</div>"+"</div>"+"</div>";return e};q.changeTheam=function(e){switch(e){case"home_transparent":this.opt.smartboxBlock.className="search-land main-page2";break;case"home_normal":this.opt.smartboxBlock.className="search-land main-page";break;default:this.opt.smartboxBlock.className="search-land";break}e&&(this.curTheam=e)};q.setLogin=function(e){this.opt.isLogin=e;if(!this.onShow){if(e){F(this.doms.msShortcutLogin,"none");F(this.doms.msShortcutMenu,"")}else{F(this.doms.msShortcutLogin,"");F(this.doms.msShortcutMenu,"none")}}};function z(){var e=0,t=I("visitkey"),o=(t||"0").substr(-2),s=parseInt(o,10);if(typeof window.smartboxGrayMtoStatic!="undefined"){e=window.smartboxGrayMtoStatic}return e==99||e&&e>=s}return q});